<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Galaxy Training!</title>
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap.min.css?v=3">
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=2">
        <link rel="stylesheet" href="/training-material/assets/css/font-awesome.css">
        <link rel="stylesheet" href="/training-material/assets/css/academicons.css">
        <link rel="stylesheet" href="/training-material/assets/css/syntax_highlighting.css">
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon" />
    </head>
    <body>
        




<header>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                Galaxy Training!
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/training-material/topics/galaxy-ui" title="Go back to list of tutorials">
                            <i class="fa fa-folder-o" aria-hidden="true"></i><span class="visually-hidden">topic</span> User Interface and Features
                        </a>
                    </li>

                    
                        
                        
                        
                    

                    
                        <li class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Where to run the tutorial">
                                <i class="fa fa-cog" aria-hidden="true"></i><span class="visually-hidden">instances</span> Galaxy Instances
                            </a>
                            <div class="dropdown-menu">
                                
                                    <a class="dropdown-item" href="https://github.com/galaxyproject/training-material/tree/master/topics/galaxy-ui/docker" title="Docker image for this tutorial">
                                        <i class="fa fa-ship" aria-hidden="true"></i><span class="visually-hidden">docker_image</span> Docker image
                                    </a>
                                
                                
                                
                            </div>
                        </li>
                    

                    

                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://zenodo.org/record/1185122/files/GSM461176_untreat_single.counts" title="Links to data">
                            <i class="fa fa-files-o" aria-hidden="true"></i><span class="visually-hidden">zenodo_link</span> Input Dataset
                        </a>
                    </li>
                    

                    

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="fa fa-life-ring" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu">
        <a class="dropdown-item" href="/training-material/faq" title="Check our FAQ">
            FAQ
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Chat on Gitter">
            Gitter
        </a>
        <a class="dropdown-item" href="https://biostar.usegalaxy.org/" title="Ask on Biostars">
            Biostars
        </a>
    </div>
</li>


                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/galaxyproject/training-material/edit/master/topics/galaxy-ui/tutorials/galaxy-intro-jupyter/tutorial.md">
                            <i class="fa fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<div class="container main-content">
    <section class="tutorial">
        <h1>Jupyter: Use Jupyter notebooks in Galaxy</h1>

        <blockquote class="overview">
            <h3>Overview</h3>

            <strong><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Questions</strong>
            <ul>
            
            <li>How to use a Jupyter Notebook in Galaxy</li>
            
            </ul>

            <strong><i class="fa fa-bullseye" aria-hidden="true"></i><span class="visually-hidden">objectives</span> Objectives</strong>
            <ul>
            
            <li>Learn about the Jupyter Interactive Environment</li>
            
            </ul>

            

            <p><strong><i class="fa fa-hourglass-end" aria-hidden="true"></i><span class="visually-hidden">time</span> Time estimation:</strong> 30 min</p>
        </blockquote>

        <h1 class="no_toc" id="introduction">Introduction</h1>

<p>In this tutorial we are going to explore the basics of using Jupyter in Galaxy. We will use a RNA seq count file as a test set to get a hang of the Jupyter notebooks.
The file is available in <a href="https://zenodo.org/record/1185122#.WzlCQNhKgWo">Zenodo</a> or in the <em>Tutorial</em> section of <em>Data Libraries</em>.
Select a file ending with <code class="highlighter-rouge">.count</code> and upload it in your history (If you want to know how to upload data in galaxy, see <a href="http://galaxyproject.github.io/training-material/topics/galaxy-data-manipulation/tutorials/get-data/slides.html#1">Getting Data into Galaxy</a> tutorial)</p>

<blockquote class="agenda">
  <h3 id="agenda">Agenda</h3>

  <p>In this tutorial, we will see :</p>

<ol id="markdown-toc">
  <li><a href="#what-is-jupyter-" id="markdown-toc-what-is-jupyter-">What is Jupyter ?</a></li>
  <li><a href="#use-jupyter-notebook-in-galaxy" id="markdown-toc-use-jupyter-notebook-in-galaxy">Use Jupyter notebook in Galaxy</a>    <ol>
      <li><a href="#open-a-notebook" id="markdown-toc-open-a-notebook">Open a Notebook</a></li>
      <li><a href="#install-libraries-in-jupyter" id="markdown-toc-install-libraries-in-jupyter">Install Libraries in Jupyter</a></li>
      <li><a href="#graph-display-in-jupyter" id="markdown-toc-graph-display-in-jupyter">Graph Display in Jupyter</a></li>
      <li><a href="#import--export-data" id="markdown-toc-import--export-data">Import / export Data</a></li>
      <li><a href="#save-the-notebook-in-your-history" id="markdown-toc-save-the-notebook-in-your-history">Save the Notebook in your history</a></li>
    </ol>
  </li>
</ol>

</blockquote>

<h1 id="what-is-jupyter-">What is Jupyter ?</h1>

<p><a href="http://jupyter.org/">Jupyter</a> in an interactive environment that mixes explanatory text, command line and output display for an interactive analysis environment. Its implementation in Galaxy facilitate the performance of additional analysis if there is no tool for it.</p>

<p>These notebooks allow you to replace any in-house script you might need to complete your analysis. You don’t need to move your data out of Galaxy. You can describe each step of your analysis in the markdown cells for an easy understanding of the processes, and save it in your history for sharing and reproducibility. In addition, thanks to <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html">Jupyter magic commands</a>, you can use several different languages in a single notebook.</p>

<p><img src="../../images/notebook_overview.png" alt="Jupyter notebook" /></p>

<p>You can find the complete manual for Jupyter commands <a href="http://jupyter-notebook.readthedocs.io/en/stable/">here</a>.</p>

<h1 id="use-jupyter-notebook-in-galaxy">Use Jupyter notebook in Galaxy</h1>

<h2 id="open-a-notebook">Open a Notebook</h2>
<p>The Jupyter notebook can be started from different points. You can either open a Jupyter notebook from a dataset in your history or from the <em>Visualize</em> tab in the upper menu.</p>

<blockquote class="hands_on">
  <h3 id="hands_on-hands-on-launching-a-jupyter-notebook-from-a-dataset-or-a-saved-jupyter-notebook"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Launching a Jupyter notebook from a dataset or a saved Jupyter notebook</h3>
  <p>If you only need one dataset from your history to perform you analysis or want to open a Jupyter notebook that you previously saved in your history, you can launch a Jupyter from a single dataset.</p>
  <ol>
    <li>Expand the dataset in you history by clicking on its name.</li>
    <li>Click on the visualization icon <i class="fa fa-bar-chart" aria-hidden="true"></i><span class="visually-hidden">galaxy-barchart</span> of the dataset <code class="highlighter-rouge">[...].count</code>.</li>
    <li>Select the Jupyter visualization in the list. <img src="../../images/visu_list.png" alt="Visualisation list" /></li>
  </ol>

</blockquote>

<blockquote class="hands_on">
  <h3 id="hands_on-hands-on-lauching-a-jupyter-notebook-from-the-visualize-tab"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Lauching a Jupyter notebook from the <em>Visualize</em> tab</h3>

  <ol>
    <li>Click on the <em>Visualize</em> tab on the upper menu and select <code class="highlighter-rouge">Interactive Environments</code></li>
    <li>To open a notebook, set the parameters as follows :
      <ul>
        <li><em>“GIE”</em> : <code class="highlighter-rouge">Jupyter</code></li>
        <li><em>“Image”</em> : <code class="highlighter-rouge">quay.io/bgruening/docker-jupyter-notebook:17.09</code></li>
        <li><em>“Datasets”</em> : The datasets you want to work on, here your <code class="highlighter-rouge">[...].count</code> file. If the first dataset you select is a notebook from you history, it will be opened instead of a new notebook.</li>
      </ul>
    </li>
    <li>Click <em>Launch</em></li>
  </ol>

</blockquote>

<h2 id="install-libraries-in-jupyter">Install Libraries in Jupyter</h2>

<p>You can install tools and libraries in Jupyter through conda and pip. In this tutorial we are going to use two libraries, <a href="">pandas</a> and <a href="">seaborn</a> respectively allowing to manipulate data as Dataframe and to create graphs.</p>

<blockquote class="hands_on">
  <h3 id="hands_on-hands-on-install-from-a-conda-recipe"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Install from a Conda recipe</h3>

  <ol>
    <li>Click on a cell of your notebook to edit it (verify that it is defined as a <code class="highlighter-rouge">Code</code> cell)</li>
    <li>Enter the following lines : <code class="highlighter-rouge">!conda install -y pandas</code> and <code class="highlighter-rouge">!conda install -y seaborn</code>
      <ul>
        <li>The <code class="highlighter-rouge">!</code> indicate you are typing a bash command line (alternatively you can use <code class="highlighter-rouge">%%bash</code> at the beginning of your cell )</li>
        <li>The <code class="highlighter-rouge">-y</code> option allows the installation without asking for confirmation  (The confirmation is not managed well by notebooks)</li>
      </ul>
    </li>
    <li><code class="highlighter-rouge">shift</code>+<code class="highlighter-rouge">return</code> to run the cell or click on the run cell button.</li>
  </ol>

</blockquote>

<blockquote class="hands_on">
  <h3 id="hands_on-hands-on-import-python-libraries"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Import Python libraries</h3>

  <ol>
    <li>Click on a cell of your notebook to edit it (verify that it is defined as a <code class="highlighter-rouge">Code</code> cell)</li>
    <li>Enter the following lines : <code class="highlighter-rouge">import pandas as pd</code>, <code class="highlighter-rouge">import seaborn as sns</code>, <code class="highlighter-rouge">from IPython.display import display</code>, and <code class="highlighter-rouge">import matplotlib.pyplot as plt</code>.</li>
    <li><code class="highlighter-rouge">shift</code>+<code class="highlighter-rouge">return</code> to run the cell or click on the run cell button.</li>
  </ol>

</blockquote>

<h2 id="graph-display-in-jupyter">Graph Display in Jupyter</h2>

<p>In this tutorial we are going to simply plot a distribution graph of our data.</p>

<blockquote class="hands_on">
  <h3 id="hands_on-hands-on-draw-a-distribution-plot"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Draw a distribution plot</h3>

  <ol>
    <li>Open the dataset as a pandas Dataframe with the function <code class="highlighter-rouge">dataframe = pd.read_table("[file_number]", header=None)</code>
      <ul>
        <li>The files are referenced in Jupyter by their number in the history.</li>
      </ul>
    </li>
    <li>Create your figure with the command <code class="highlighter-rouge">fig, ax = plt.subplots( nrows=1, ncols=1 ,figsize=(15, 10) )</code>
      <ul>
        <li><code class="highlighter-rouge">nrows=1, ncols=1</code> means you will have one plot in your figure (one row and one column)</li>
        <li><code class="highlighter-rouge">figsize</code> parameter determine the size of the figure</li>
      </ul>
    </li>
    <li>Draw the distribution plot of the second column of our dataset with the command <code class="highlighter-rouge">sns.distplot(dataframe[1]);</code></li>
    <li>Show the figure in the Jupyter notebook with <code class="highlighter-rouge">display(fig)</code> <img src="../../images/jupyter_plot.png" alt="Distribution plot in Jupyter" /></li>
  </ol>

</blockquote>

<h2 id="import--export-data">Import / export Data</h2>

<p>In addition of starting a Jupyter notebook with datasets included at the beginning , you can import them later using the <code class="highlighter-rouge">get(12)</code> command, with the number of your dataset in the history (If you are working on a collection, unhide datasets to see their numbers).
If you want to save a file you generated in your notebook, use the <code class="highlighter-rouge">put("file_name")</code> command. That is what we are going to do with our distribution plot.</p>

<blockquote class="hands_on">
  <h3 id="hands_on-hands-on-save-an-jupyter-generated-image-into-a-galaxy-history"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Save an Jupyter generated image into a Galaxy History</h3>

  <ol>
    <li>Create an image file with the figure you just draw with the command <code class="highlighter-rouge">fig.savefig('distplot.png')</code></li>
    <li>Export your image into your history with the command  <code class="highlighter-rouge">put('distplot.png')</code></li>
  </ol>

</blockquote>

<h2 id="save-the-notebook-in-your-history">Save the Notebook in your history</h2>

<p>Once you are done with you analysis or anytime during the editing process, you can save the notebook into your history by clicking on the <em>Save</em> icon.</p>

<p><img src="../../images/save_notebook.png" alt="Save a Jupyter notebook" /></p>

<p>This will create a new notebook <code class="highlighter-rouge">.pynb</code> file in your history every time you click on this icon. You can later re-open it to continue to use it as described in the <a href="#open-a-notebook">open a notebook section</a></p>

<h1 class="no_toc" id="conclusion">Conclusion</h1>

<p><i class="fa fa-trophy" aria-hidden="true"></i><span class="visually-hidden">trophy</span> You have just performed your first analysis in Jupyter notebook integrated environment in Galaxy. You generated an distribution plot that you saved in your history along with the notebook to generate it.</p>


        
        <blockquote class="key_points">
            <h3><i class="fa fa-key" aria-hidden="true"></i><span class="visually-hidden">keypoints</span> Key points</h3>

            <ul>
                
                <li>Start Jupyter from the Visualize tab or from a dataset</li>
                
                <li>Install Libraries with pip or Conda</li>
                
                <li>Use get() to import datasets from your history to the notebook</li>
                
                <li>Use put() to export datasets from the notebook to your history</li>
                
                <li>Save your notebook into your history</li>
                
            </ul>
        </blockquote>
        

        

        

        <h3><i class="fa fa-thumbs-up" aria-hidden="true"></i><span class="visually-hidden">congratulations</span> Congratulations on successfully completing this tutorial!</h3>

        <hr>

        <blockquote class="overview">
            <h3><i class="fa fa-comments-o" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Help us improve this content!</h3>
            Please take a moment to fill in the Galaxy Training Network
            <a href="https://tinyurl.com/GTNfeedback">Feedback Form</a>.
            Your feedback helps us improve this tutorial and will be considered
            in future revisions.
        </blockquote>
    </section>
</div>


<footer>
    <div class="container">
        <p>
            This material is the result of a collaborative work. Thanks to the
            <a href="https://wiki.galaxyproject.org/Teach/GTN">Galaxy Training Network</a>
            and all the <a href="/training-material/hall-of-fame">contributors</a> ()!
        </p>
        <p>
            Found a typo? Something is wrong in this tutorial? Edit it on
            <a href="https://github.com/galaxyproject/training-material/tree/master/topics/galaxy-ui/tutorials/galaxy-intro-jupyter/tutorial.md">GitHub</a>.
        </p>
    </div>
</footer>

    </body>
    <script type="text/javascript" src="/training-material/assets/js/jquery.slim.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/popper.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap.min.js?v=3"></script>
    <script type="text/javascript" src="/training-material/assets/js/details-element-polyfill.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="/training-material/assets/js/main.js"></script>
</html>
